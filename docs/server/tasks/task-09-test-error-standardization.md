# Task 09: 테스트 확대 & API 에러 표준화

> 테스트 커버리지 확대 + E2E 테스트 + API 에러 응답 포맷 통일

## 선행 조건

- [x] Vitest 테스트 인프라 구축 완료
- [x] 기존 통합 테스트 작성 완료 (Auth, Posts, Comments, Guestbook)

## 작업 항목

### 1. 테스트 커버리지 확대

- [ ] **현재 커버리지 측정**
  - `vitest --coverage` 실행 및 리포트 분석
- [ ] **누락된 테스트 보강**
  - Categories API 테스트
  - Assets API 테스트
  - Stats API 테스트
  - User API 엣지 케이스

### 2. E2E 테스트

- [ ] **통합 시나리오 테스트 작성**
  - 인증 → 게시글 CRUD → 댓글 작성 → 조회수 반영
  - OAuth 로그인 → 프로필 수정 → 댓글 작성 → 계정 탈퇴
- [ ] **테스트 데이터 시딩 전략**
  - 시나리오별 초기 데이터 설정

### 3. API 에러 응답 표준화

- [ ] **에러 응답 포맷 정의**
  - `{ error: { code: string, message: string, details?: any } }`
- [ ] **HttpError 클래스 확장**
  - 에러 코드 체계 도입 (예: AUTH_001, POST_001)
- [ ] **전역 에러 핸들러 업데이트**
  - 모든 에러를 표준 포맷으로 변환
- [ ] **Zod 검증 에러 표준화**
  - 필드별 에러 메시지 포맷

## 검증

- [ ] 커버리지 목표치 달성 (예: 80%+)
- [ ] E2E 시나리오 전체 통과
- [ ] 모든 에러 응답이 표준 포맷 준수
- [ ] 기존 테스트 통과
